#!/bin/bash

. ${HOME}/etc/shell.conf
. ${SHINCLUDE}/lg-functions

while [ $# -gt 0 ]; do
    case $1 in
        --hosts|-h)
            shift
            LG_FRAMES="$1"
          ;;
    esac 
    shift   
done
RSS_LIMIT=${1:-100000}

lg-sudo-bg --hosts "${LG_FRAMES}" "
for instance in \`ps -o rss=,user= \$(pgrep googleearth-bin) | tr \" \" \":\"\`; do
    if [ \${instance%%:*} -lt ${RSS_LIMIT} ]; then
        pkill -u \${instance##*:} googleearth-bin
    fi
done
"
